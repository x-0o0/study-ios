# ë©”ë©˜í†  íŒ¨í„´

ê°ì²´ë¥¼ ì €ì¥í•˜ê³  ë³µêµ¬í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” íŒ¨í„´.

## ë“¤ì–´ê°€ê¸° ì•ì„œ ë©”ë©˜í† ë€?

The object that you keep to remember ë¬´ì‹œê¸°. ì¦‰ ê¸°ì–µí•˜ê¸° ìœ„í•œ ë¬¼ê±´, ì¦í‘œ

## êµ¬ì„± 

> ë‹¤ìŒ ë‚´ìš©ì€ ìœ„í‚¤ë°±ê³¼ë¥¼ ì°¸ê³ í•œ ë‚´ìš©ì…ë‹ˆë‹¤.

ì„¸ ê°€ì§€ë¡œ êµ¬ì„±: ì˜¤ë¦¬ì§€ë„¤ì´í„°(Orignator), ì¼€ì–´í…Œì´ì»¤(Caretaker), ë©”ë©˜í† (Memento)

<img width="712" alt="Screen Shot 2022-04-28 at 7 40 10 PM" src="https://user-images.githubusercontent.com/53814741/165735183-74aa531d-67b3-4706-bef0-f8b829386355.png">

### ì˜¤ë¦¬ì§€ë„¤ì´í„°

- ì €ì¥ë˜ê±°ë‚˜ ë³µêµ¬í•  ê°ì²´
- Stateë¥¼ ê°–ëŠ” ê°ì²´

ë‹¤ìŒê³¼ ê°™ì€ ì±…ì„ì„ ê°–ëŠ”ë‹¤.
- ë©”ë©˜í† ì— ë‚´ë¶€ Stateë¥¼ ì €ì¥
- ë©”ë©˜í† ë¡œë¶€í„° ì´ì „ State ë³µêµ¬

### ë©”ë©˜í† 

ì €ì¥ëœ Stateë¥¼ ë‚˜íƒ€ëƒ„

### ì¼€ì–´í…Œì´ì»¤ (Caretaker)

ì˜¤ë¦¬ì§€ë„¤ì´í„°ì—ê²Œ ì €ì¥ì„ ìš”ì²­í•˜ê³  ì‘ë‹µìœ¼ë¡œ ë©”ë©˜í† ë¥¼ ë°›ëŠ”ë‹¤.
ì´ ë©”ë©˜í† ë¥¼ ë³´ì¡´í•´ì•¼í•˜ëŠ” ì±…ì„ì´ ìˆê³ 
ë‚˜ì¤‘ì— ì˜¤ë¦¬ì§€ë„¤ì´í„°ì— ë‹¤ì‹œ ëŒë ¤ì£¼ì–´ ìƒíƒœë¥¼ ë³µêµ¬ ì‹œí‚¨ë‹¤.

1. ë¨¼ì € ì˜¤ë¦¬ì§€ë„¤ì´í„°ì—ê²Œ ë©”ë©˜í†  ê°ì²´ë¥¼ ìš”ì²­. (ë‚´ë¶€State ì €ì¥)
2. ê·¸ ë’¤ ì¼ë ¬ì˜ ëª…ë ¹ì„ ìˆ˜í–‰
3. ì›ë˜ ìƒíƒœë¡œ ë˜ëŒë¦¬ê¸° ìœ„í•´ ë©”ë©˜í†  ê°ì²´ë¥¼ ì˜¤ë¦¬ì§€ë„¤ì´í„°ì— ë¦¬í„´ (ì´ì „ State ë³µêµ¬)

## ì¥ì 

ì˜ ë””ìì¸ ëœ íŒ¨í„´ì€ ìº¡ìŠí™”ëœ í˜•íƒœë¥¼ ê°–ê¸° ë•Œë¬¸ì— ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ì–´ë ¤ìš°ë‚˜ 
ë©”ë©˜í†  íŒ¨í„´ì„ ì“°ë©´ ìº¡ìŠí™”ë¥¼ í›¼ì†í•˜ì§€ ì•Šê³  ì˜¤ë¦¬ì§€ë„¤ì´í„°ì˜ Stateë¥¼ ë³€ê²½í•˜ê³  ë³µêµ¬í•  ìˆ˜ ìˆë‹¤.


## ì–¸ì œ ì¨ì•¼ í•˜ëŠ”ê°€?

ì–´ë–¤ ê°ì²´ ìƒíƒœë¥¼ ì €ì¥í–ˆë‹¤ê°€ ë³µêµ¬í•´ì•¼í•˜ëŠ” ê²½ìš°ì— ì í•©.

e.g., ê²Œì„ì„ ì €ì¥í•˜ëŠ” ì‹œìŠ¤í…œ - ì˜¤ë¦¬ì§€ë„¤ì´í„°ê°€ ê²Œì„ìƒíƒœ(ë ˆë²¨, ì²´ë ¥ ë“±), ë©”ë©˜í† ê°€ ì €ì¥ëœ ë°ì´í„°, ì¼€ì–´í…Œì´ì»¤ëŠ” ê²Œì„ì‹œìŠ¤í…œ

<details>
  
  **ì¼€ì–´í…Œì´ì»¤ì™€ ë©”ë©˜í† **
  
  ![image](https://user-images.githubusercontent.com/53814741/165740262-d2d12aaa-02f1-4691-9a70-a6020b0d73c8.png)

  **ì˜¤ë¦¬ì§€ë„¤ì´í„°**
  
  ![image](https://user-images.githubusercontent.com/53814741/165740394-6a147187-e06b-4b03-96a5-19dd2002c7b3.png)
</details>

ë©”ë©˜í† ë¥¼ ë°°ì—´ë¡œ ë³´ê´€í•  ìˆ˜ ìˆìŒ. ì´ì „ ìƒíƒœë“¤ì„ ë‹¨ê³„ë³„ë¡œ ì €ì¥. IDEì—ì„œ ë’¤ë¡œê°€ê¸°, ì•ìœ¼ë¡œê°€ê¸° ë“±ì— ì“°ê¸° ì¢‹ìŒ.

> ì¿ ë§ì—ì„œ ì½ì€ ê³µì§€ì— ëŒ€í•œì²˜ë¦¬, ì•± ì‹¤í–‰ ì‹œê°ì— ëŒ€í•œ ì²˜ë¦¬ ë“± ì €ì¥í•˜ëŠ” ë¡œì§ì— ì•Œê²Œëª¨ë¥´ê²Œ ì“°ê³  ìˆì—ˆìŒ. ì¢€ ë” ë©”ë©˜í†  íŒ¨í„´ì— ë§ì¶° ì˜ ë””ìì¸í™” í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ìŒ.

## ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
<img width="562" alt="Screen Shot 2022-04-28 at 7 34 50 PM" src="https://user-images.githubusercontent.com/53814741/165734308-c2f53ea4-70a1-4b99-adcd-3293119e9851.png">

## ì˜ˆì‹œ

### iOS

iOS ì—ì„œëŠ” ë³´í†µ ì˜¤ë¦¬ì§€ë„¤ì´í„°ì˜ ìƒíƒœë¥¼ ë©”ë©˜í† ë¡œ ì¸ì½”ë”© í•˜ê¸° ìœ„í•´ `Encoder` ë¥¼ ì‚¬ìš©í•˜ê³ 
ë©”ë©˜í† ë¥¼ ë””ì½”ë”©í•˜ì—¬ ì˜¤ë¦¬ì§€ë„¤ì´í„°ë¡œ ë˜ëŒë¦¬ê¸° ìœ„í•´ `Decoder` ë¥¼ ì‚¬ìš©í•œë‹¤.

ì´ëŠ” ì˜¤ë¦¬ì§€ë„¤ì´í„°ì— ëŒ€í•´ ì¸ì½”ë”© / ë””ì½”ë”© ë¡œì§ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ `JSONEncoder` ì™€ `JSONDecoder` ëŠ” JSON ë°ì´í„° ì™€ ê°ì²´ ì‚¬ì´ì—ì„œ ì¸ì½”ë”©ê³¼ ë””ì½”ë”©ì„ í•´ì¤€ë‹¤.
(ğŸ§ë¬´ìŠ¨ë§ì¸ì§€ ì‚¬ì‹¤ ëª¨ë¦„)

**ì˜¤ë¦¬ì§€ë„¤ì´í„°**

```swift
import Foundation
// MARK: - Originator
public class Game: Codable {

  // ìƒíƒœ í´ë˜ìŠ¤
  public class State: Codable {
    // ë‚¨ì€ ì‹œë„ 
    public var attemptsRemaining: Int = 3
    // ë ˆë²¨
    public var level: Int = 1
    // ì ìˆ˜
    public var attemptsRemaining: Int = 3
    public var score: Int = 0
  }
  
  // ìƒíƒœ ê°’
  public var state = State()
  
  // ë³´ìŠ¤ëª¹ ì¡ì•„ì„œ ì ìˆ˜ íšë“
  public func rackUpMassivePoints() {
    state.score += 9002
  }
  
  // ëª¬ìŠ¤í„°ê°€ í”Œë ˆì´ì–´ë¥¼ ì¡ì•„ë¨¹ìŒ
  public func monstersEatPlayer() {
    state.attemptsRemaining -= 1
  }
}
```

**ë©”ë©˜í† **

```swift
// MARK: - Memento
typealias GameMemento = Data

// Encoder -> ì €ì¥
// Decoder -> ë³µêµ¬
```

**ì¼€ì–´í…Œì´ì»¤**

```swift
// MARK: - CareTaker
public class GameSystem {
  // ë°ì´í„°(ë©”ë©˜í† )ë¡œë¶€í„° ê²Œì„(ì˜¤ë¦¬ì§€ë„¤ì´í„°)ë¥¼ ë³µêµ¬í•˜ëŠ”ë° ì“°ì„
  private let decoder = JSONDecoder()
  // ê²Œì„(ì˜¤ë¦¬ì§€ë„¤ì´í„°)ë¥¼ ë°ì´í„°(ë©”ë©˜í† )ë¡œ ì €ì¥í•˜ëŠ”ë° ì“°ì„
  private let encoder = JSONEncoder()
  // ë¡œì»¬ ë°ì´í„° ì €ì¥ì†Œ
  private let userDefaults = UserDefaults.standard
  
  // ì €ì¥ ë¡œì§ì„ ìº¡ìŠí™”í•¨. ë¡œì»¬ë°ì´í„° ì €ì¥ì†Œì— ì˜¤ë¦¬ì§€ë„¤ì´í„°ë¥¼ ë©”ë©˜í†  ê°ì²´ë¡œ ì¸ì½”ë”© í›„ ì €ì¥
  public func save(_ game: Game, title: String) throws {
    let data = try encoder.encode(game)
    userDefaults.set(data, forKey: title)
  }

  // ë¡œë”© ë¡œì§ì„ ìº¡ìŠí™”í•¨. ë©”ë©˜í†  ë°ì´í„°ë¥¼ ì˜¤ë¦¬ì§€ë„¤ì´í„°ë¡œ ë³µêµ¬í•´ì„œ ë¦¬í„´
  public func load(title: String) throws -> Game {
    guard let data = userDefaults.data(forKey: title),
          let game = try? decoder.decode(Game.self, from: data) else {
          // ì—ëŸ¬ ë¦¬í„´
          throw Error.gameNotFound
      }
    return game 
  }
  
  // ì—ëŸ¬ ì •ì˜
  public enum Error: String, Swift.Error {
    case gameNotFound
  }
}
```

**ì‚¬ìš©ì˜ˆì‹œ**

```swift
var game = Game()
game.monstersEatPlayer()
game.rackUpMassivePoints()

 // Save Game
let gameSystem = GameSystem()
try gameSystem.save(game, title: "Best Game Ever")

 // New Game
game = Game()
print("New Game Score: \(game.state.score)") // New Game Score: 0

 // Load Game
game = try! gameSystem.load(title: "Best Game Ever")
print("Loaded Game Score: \(game.state.score)") // Loaded Game Score: 9002
```

### íŒŒì´ì¬

**ë©”ë©˜í† **

<details>

```python
class Memento(object):
    def __init__(self, state):
        self._state = state
        
    def get_saved_state(self):
        return self._state
```
</details>

**ì˜¤ë¦¬ì§€ë„¤ì´í„°**

<details>

```python
class Originator(object):
    _state = ""
    
    def set(self, state):
        print("Originator: Setting state to", state)
        self._state = state
        
    def save_to_memento(self):
        print("Originator: Saving to Memento.")
        return Memento(self._state)
        
    def restore_from_memento(self, memento):
        self._state = memento.get_saved_state()
        print("Originator: State after restoring from Memento:", self._state)
```

</details>

**ì¼€ì–´í…Œì´ì»¤**

<details>
  
```python
saved_states = []
originator = Originator()
originator.set("State1")

originator.set("State2")
saved_states.append(originator.save_to_memento())

originator.set("State3")
saved_states.append(originator.save_to_memento())

originator.set("State4")
originator.restore_from_memento(saved_states[0])
```

</details>


